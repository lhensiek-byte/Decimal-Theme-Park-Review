<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Decimals Delight - Park Manager</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Playful Carnival -->
    <!-- Application Structure Plan: A single-page dashboard application with tab-based navigation for different park areas (Dashboard, Tickets, Shops, Arcade, Maintenance). This structure is intuitive for students as it mirrors the thematic sections of the source handbook. The core interaction involves solving math problems in interactive cards, receiving immediate feedback, and seeing a central budget tracker update in real-time. This gamified approach enhances engagement and makes the abstract concept of budget management tangible and interactive. -->
    <!-- Visualization & Content Choices: Main budget displayed as a large dynamic number. A Chart.js doughnut chart will visualize the initial budget vs. money spent, updating with each completed expense task. Goal: Provide a clear, at-a-glance visual summary of financial status. Problems are presented as text in cards with number inputs and check buttons. Goal: Test decimal calculation skills. Interaction: User input and button click trigger instant validation and visual feedback (correct/incorrect messages). Justification: This interactive format is more engaging for 6th graders than a static worksheet. Library: Chart.js (Canvas). CONFIRMING NO SVG/Mermaid. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .task-card {
            transition: all 0.3s ease-in-out;
        }
        .nav-item.active {
            background-color: #fbbf24;
            color: #1f2937;
        }
        .feedback {
            transition: opacity 0.5s;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
    </style>
</head>
<body class="bg-amber-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-amber-600">Decimals Delight Theme Park</h1>
            <p class="text-lg text-gray-600 mt-2">Your Park Manager Dashboard</p>
        </header>

        <nav class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8">
            <button data-section="dashboard" class="nav-item active font-semibold py-2 px-4 rounded-full bg-white shadow-md hover:bg-amber-200 transition">üìä Dashboard</button>
            <button data-section="ticket-booth" class="nav-item font-semibold py-2 px-4 rounded-full bg-white shadow-md hover:bg-amber-200 transition">üéüÔ∏è Ticket Booth</button>
            <button data-section="shops" class="nav-item font-semibold py-2 px-4 rounded-full bg-white shadow-md hover:bg-amber-200 transition">üçø Shops</button>
            <button data-section="arcade" class="nav-item font-semibold py-2 px-4 rounded-full bg-white shadow-md hover:bg-amber-200 transition">üïπÔ∏è Arcade</button>
            <button data-section="maintenance" class="nav-item font-semibold py-2 px-4 rounded-full bg-white shadow-md hover:bg-amber-200 transition">üé¢ Maintenance</button>
        </nav>

        <main id="app-content">

            <section id="dashboard" class="content-section">
                <div class="bg-white p-6 rounded-2xl shadow-lg text-center">
                    <h2 class="text-2xl font-bold mb-4 text-amber-700">Manager's Office</h2>
                     <p class="text-gray-600 mb-6">Welcome, Manager! Your job is to make sure our park runs smoothly and stays within budget. Track your funds, complete tasks in each park area, and see your financial skills in action!</p>
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h3 class="text-xl font-semibold text-gray-700">Current Park Budget</h3>
                            <p id="budget-display" class="text-5xl font-bold text-green-600 my-4">$1,500.00</p>
                            <div class="w-full bg-gray-200 rounded-full h-4">
                                <div id="budget-bar" class="bg-green-500 h-4 rounded-full" style="width: 100%"></div>
                            </div>
                            <p class="text-sm text-gray-500 mt-2">Initial Budget: $1,500.00</p>
                        </div>
                        <div class="chart-container">
                             <h3 class="text-xl font-semibold text-gray-700 mb-4">Budget Overview</h3>
                            <canvas id="budgetChart"></canvas>
                        </div>
                    </div>
                     <div class="mt-8">
                        <h3 class="text-xl font-semibold text-gray-700">Task Progress</h3>
                        <p id="progress-text" class="text-gray-600 mt-2">Complete tasks in the other sections to see your progress!</p>
                        <div id="task-checklist" class="flex flex-wrap justify-center gap-4 mt-4"></div>
                    </div>
                </div>
            </section>

            <section id="ticket-booth" class="content-section hidden">
                <div class="bg-white p-6 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-1 text-center text-amber-700">üéüÔ∏è Ticket Booth Tasks</h2>
                    <p class="text-center text-gray-600 mb-6">Calculate the income from ticket sales. Revenue you earn here will be added to your budget!</p>
                    <div id="tasks-ticket-booth" class="space-y-6"></div>
                </div>
            </section>
            
            <section id="shops" class="content-section hidden">
                <div class="bg-white p-6 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-1 text-center text-amber-700">üçø Snack & Souvenir Shops Tasks</h2>
                     <p class="text-center text-gray-600 mb-6">Figure out the total sales from our popular food and merchandise items. This income boosts your park's budget.</p>
                    <div id="tasks-shops" class="space-y-6"></div>
                </div>
            </section>

            <section id="arcade" class="content-section hidden">
                 <div class="bg-white p-6 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-1 text-center text-amber-700">üïπÔ∏è Arcade Tasks</h2>
                    <p class="text-center text-gray-600 mb-6">The arcade is a big hit! Calculate prize costs and total games played. Some of these will be expenses that come out of your budget.</p>
                    <div id="tasks-arcade" class="space-y-6"></div>
                </div>
            </section>
            
            <section id="maintenance" class="content-section hidden">
                <div class="bg-white p-6 rounded-2xl shadow-lg">
                    <h2 class="text-2xl font-bold mb-1 text-center text-amber-700">üé¢ Park Maintenance & Upgrades</h2>
                    <p class="text-center text-gray-600 mb-6">Keeping the rides safe and exciting costs money. Calculate these expenses, which will be deducted from your budget.</p>
                    <div id="tasks-maintenance" class="space-y-6"></div>
                </div>
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const initialBudget = 1500.00;
            let currentBudget = initialBudget;

            const tasks = [
                { id: 1, section: 'ticket-booth', type: 'revenue', question: 'A family of two adults and three children buys tickets. What is their total cost? (Adult: $28.50, Child: $18.75)', answer: 113.25 },
                { id: 2, section: 'ticket-booth', type: 'revenue', question: 'A school group with 20 students and 3 teachers arrives. What is the total revenue from their tickets? (Student: $25.50, Teacher discount: $18.50)', answer: 565.50 },
                { id: 3, section: 'ticket-booth', type: 'calculation', question: 'At the end of the day, you count $854.75 in the cash register. At the start of the day, you had $150.25. How much money did you make in ticket sales today?', answer: 704.50 },
                { id: 4, section: 'shops', type: 'revenue', question: 'A vendor sold 50 small sodas ($2.50 each) and 35 bags of popcorn ($3.75 each). How much money did they make in total?', answer: 256.25 },
                { id: 5, section: 'shops', type: 'calculation', question: 'A company wants to buy 15 theme park hats for their employees at $12.50 each. What is the total cost?', answer: 187.50 },
                { id: 6, section: 'shops', type: 'revenue', question: 'A tour group buys 12 hot dogs ($4.25 each) and 12 cotton candies ($5.25 each). What is the total bill?', answer: 114.00 },
                { id: 7, section: 'arcade', type: 'expense', question: 'You have a budget of $200.00 to buy large stuffed animals for prizes. Each costs $12.50. How many can you buy?', answer: 16, effect: -200.00, isPurchase: true },
                { id: 8, section: 'arcade', type: 'calculation', question: 'A prize chest worth $136.50 is filled with small toys. If each toy is worth $4.75, how many small toys are in the chest? (Round to the nearest whole number if necessary)', answer: 29 },
                { id: 9, section: 'arcade', type: 'calculation', question: 'The arcade made $3,250.25 in one week. If each game play costs $0.75, how many games were played?', answer: 4333.67, allowRange: 0.01 },
                { id: 10, section: 'maintenance', type: 'expense', question: 'You must pay for a Roller Coaster Maintenance check-up costing $125.75. How much will your budget decrease?', answer: 125.75, effect: -125.75 },
                { id: 11, section: 'maintenance', type: 'calculation', question: 'The cost of upgrading one Ferris Wheel is $89.50. How much would it cost to upgrade two Ferris Wheels in the park?', answer: 179.00 },
                { id: 12, section: 'maintenance', type: 'expense', question: "The park's profit for the day is $750.75. To ensure the arcade machines work well, you spend $45.50 on each of the 5 machines. How much do you spend in total?", answer: 227.50, effect: -227.50 }
            ];

            const completedTasks = new Set();

            const budgetDisplay = document.getElementById('budget-display');
            const budgetBar = document.getElementById('budget-bar');
            const navItems = document.querySelectorAll('.nav-item');
            const contentSections = document.querySelectorAll('.content-section');
            const taskChecklist = document.getElementById('task-checklist');
            const progressText = document.getElementById('progress-text');

            function formatCurrency(amount) {
                return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount);
            }

            function updateBudgetDisplay() {
                budgetDisplay.textContent = formatCurrency(currentBudget);
                const percentage = Math.max(0, (currentBudget / initialBudget) * 100);
                budgetBar.style.width = `${percentage}%`;
                
                if (percentage < 25) budgetBar.classList.replace('bg-green-500', 'bg-red-500');
                else if (percentage < 50) budgetBar.classList.replace('bg-green-500', 'bg-yellow-500');
                
                updateChart();
            }

            let budgetChart;
            function setupChart() {
                const ctx = document.getElementById('budgetChart').getContext('2d');
                budgetChart = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Remaining Budget', 'Money Spent/Allocated'],
                        datasets: [{
                            data: [currentBudget, initialBudget - currentBudget],
                            backgroundColor: ['#22c55e', '#ef4444'],
                            borderColor: ['#ffffff', '#ffffff'],
                            borderWidth: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.label}: ${formatCurrency(context.raw)}`;
                                    }
                                }
                            }
                        }
                    }
                });
            }

            function updateChart() {
                const spent = Math.max(0, initialBudget - currentBudget);
                budgetChart.data.datasets[0].data = [currentBudget, spent];
                budgetChart.update();
            }

            function renderTasks() {
                tasks.forEach(task => {
                    const container = document.getElementById(`tasks-${task.section}`);
                    const card = document.createElement('div');
                    card.className = 'task-card bg-amber-50 p-4 rounded-xl border border-amber-200';
                    card.innerHTML = `
                        <p class="font-semibold text-gray-700 mb-2">Task ${task.id}: ${task.question}</p>
                        <div class="flex flex-col sm:flex-row items-center gap-2 mt-2">
                            <input type="number" id="answer-${task.id}" class="w-full sm:w-auto flex-grow p-2 border border-gray-300 rounded-lg" placeholder="Your Answer">
                            <button data-task-id="${task.id}" class="check-answer-btn w-full sm:w-auto bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition">Check Answer</button>
                        </div>
                        <p id="feedback-${task.id}" class="feedback text-sm mt-2 opacity-0 h-4"></p>
                    `;
                    container.appendChild(card);
                    
                    const checkmark = document.createElement('div');
                    checkmark.id = `checklist-${task.id}`;
                    checkmark.className = 'w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-white font-bold text-sm';
                    checkmark.textContent = task.id;
                    taskChecklist.appendChild(checkmark);
                });
            }

            function handleNavigation(e) {
                const targetSection = e.target.dataset.section;
                
                contentSections.forEach(section => {
                    section.classList.toggle('hidden', section.id !== targetSection);
                });

                navItems.forEach(item => {
                    item.classList.toggle('active', item.dataset.section === targetSection);
                });
            }

            function handleAnswerCheck(e) {
                if (!e.target.classList.contains('check-answer-btn')) return;

                const taskId = parseInt(e.target.dataset.taskId, 10);
                const task = tasks.find(t => t.id === taskId);
                const input = document.getElementById(`answer-${task.id}`);
                const feedback = document.getElementById(`feedback-${task.id}`);
                const userAnswer = parseFloat(input.value);

                if (isNaN(userAnswer)) {
                    feedback.textContent = 'Please enter a valid number.';
                    feedback.className = 'feedback text-sm mt-2 text-red-600 opacity-100 h-4';
                    return;
                }

                const isCorrect = task.allowRange ? Math.abs(userAnswer - task.answer) <= task.allowRange : userAnswer === task.answer;
                
                if (isCorrect) {
                    if (!completedTasks.has(taskId)) {
                        if (task.type === 'revenue') {
                            currentBudget += task.answer;
                        } else if (task.type === 'expense') {
                             currentBudget += task.effect;
                        }
                        updateBudgetDisplay();
                        completedTasks.add(taskId);
                    }
                    feedback.textContent = 'Correct! Great job!';
                    feedback.className = 'feedback text-sm mt-2 text-green-600 opacity-100 h-4';
                    e.target.disabled = true;
                    input.disabled = true;
                    e.target.classList.replace('bg-amber-500', 'bg-green-500');
                    e.target.textContent = '‚úì Completed';
                    
                    const checkmark = document.getElementById(`checklist-${task.id}`);
                    checkmark.classList.replace('bg-gray-300', 'bg-green-500');
                    checkmark.textContent = '‚úì';
                    
                    progressText.textContent = `You've completed ${completedTasks.size} out of ${tasks.length} tasks!`;

                } else {
                    feedback.textContent = 'Not quite, try again! Check your calculations.';
                    feedback.className = 'feedback text-sm mt-2 text-red-600 opacity-100 h-4';
                }
            }

            navItems.forEach(item => item.addEventListener('click', handleNavigation));
            document.getElementById('app-content').addEventListener('click', handleAnswerCheck);
            
            renderTasks();
            setupChart();
            updateBudgetDisplay();
        });
    </script>
</body>
</html>
